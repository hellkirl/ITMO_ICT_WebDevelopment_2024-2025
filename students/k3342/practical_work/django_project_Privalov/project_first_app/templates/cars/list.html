{% extends 'base.html' %}

{% block title %}Cars List{% endblock %}

{% block content %}
    <h1>Cars</h1>
    <a href="{% url 'car-create' %}" class="btn btn-primary mb-3">Add New Car</a>
    <form method="post" action="{% url 'car-bulk-delete' %}">
        {% csrf_token %}
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col"><input type="checkbox" id="select-all"></th>
                    <th scope="col">License Plate</th>
                    <th scope="col">Brand</th>
                    <th scope="col">Model</th>
                    <th scope="col">Color</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for car in cars %}
                <tr>
                    <td><input type="checkbox" name="selected_cars" value="{{ car.id }}"></td>
                    <td>{{ car.license_plate }}</td>
                    <td>{{ car.brand }}</td>
                    <td>{{ car.model }}</td>
                    <td>{{ car.color }}</td>
                    <td>
                        <a href="{% url 'car-detail' car.id %}" class="btn btn-info btn-sm">View</a>
                        <a href="{% url 'car-update' car.id %}" class="btn btn-warning btn-sm">Edit</a>
                        <a href="{% url 'car-delete' car.id %}" class="btn btn-danger btn-sm">Delete</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6">No cars available.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <button type="submit" class="btn btn-danger">Delete Selected</button>
    </form>

    <script>
        document.getElementById('select-all').addEventListener('click', function(event){
            const checkboxes = document.querySelectorAll('input[name="selected_cars"]');
            checkboxes.forEach((checkbox) => {
                checkbox.checked = event.target.checked;
            });
        });
    </script>
{% endblock %}
